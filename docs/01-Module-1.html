<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Module 1</title>
    <meta charset="utf-8" />
    <meta name="author" content="" />
    <script src="libs/header-attrs-2.26/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: middle, inverse



# Module 1 - First steps in R

.section-subtitle[
- Using R and RStudio
- Coding basics
- Data structures
- R packages
- R in action - making a visualisation with ggplot2
]

---

# Overview of R

&lt;style type="text/css"&gt;
.r-console-img {
margin: 0;
position: absolute;
top: 60%;
right: 0;
-ms-transform: translate(-25%, -50%);
transform: translate(-25%, -50%);
}
&lt;/style&gt;

.pull-left[


- Versatile statistical computing language used for
  - data analysis 
  - visualization 
  - statistical modeling
  - data engineering
  - web applications

- R is open-source and community driven

- Many users from many fields
  - Bioinformatics
  - Economics and Finance
  - Machine Learning
  - Social Sciences
  - Environmental Science
  - Healthcare and Epidemiology
  - and more ...

]

.pull-right[

&lt;div class="figure"&gt;
&lt;img src="images/r-terminal-screenshot.png" alt="The R console" width="100%" /&gt;
&lt;p class="caption"&gt;The R console&lt;/p&gt;
&lt;/div&gt;

]

---

# Interacting with R

The basic interaction mode in R is one of **expression evaluation**. 

- The user enters an expression
- The system evaluates it and prints the result

--


```r
10 + 0.5 * 2 + 1.2 * 3
```

```
#&gt; [1] 14.6
```

--


```r
plot(sin(1:10), type = 'l')
```

![](01-Module-1_files/figure-html/unnamed-chunk-4-1.png)&lt;!-- --&gt;

---

# R is built with packages

R contains a number of **packages** .. bundles of code, data, documentation .. that do things

- The **base** version of R contains many useful 'built-in' packages

- We often install additional packages to **extend the functionality of R**

&lt;/br&gt;
&lt;/br&gt;

--

.center[
### External packages make R very popular and diverse in functionality
]


&lt;img src="images/to-infinity-and-beyond.jpeg" width="400px" style="display: block; margin: auto;" /&gt;

---

# Challenges for the new user


&lt;style type="text/css"&gt;
.challenges-computer-guy {
  position: absolute;
  bottom: 5%;
  right: 2%;
  width: 400px;
}
&lt;/style&gt;

.challenges-computer-guy[
![](images/computer-guy-meme.png)&lt;!-- --&gt;
]

- Writing **code** instead of using a Graphical User Interface (GUI)


```r
lm(response ~ predictor_1 + predictor_2, data = model_data)
```

--

- Interacting with the **computer file system** with the command line interface (CLI)


```r
"C:/Users/shaun/Documents/madrid-sci-R/student-material"
```

--

- **Data literacy** - datasets for computers and tidy data

--

- Navigating **R packages**

--

- **Project management** - scripts, data, outputs

--

- Adopting **reproducible research** strategies 


---

# RStudio

.pull-left[

- RStudio is an **Integrated Development Environment (IDE)**. 

- It **faciliates** the use of R. 

- It makes coding in R **more efficient and productive**
  - R scripts
  - syntax highlighting
  - code completion

- Provides **project management** allowing users to organise projects

- And other, more **advanced** R tools

]

.pull-right[

&lt;div class="figure"&gt;
&lt;img src="images/rstudio-screenshot.png" alt="RStudio" width="100%" /&gt;
&lt;p class="caption"&gt;RStudio&lt;/p&gt;
&lt;/div&gt;

]

---

class: middle, center
background-image: url(images/rstudio-screenshot-labelled.png)
background-size: contain

---

# Where does coding happen?

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/rstudio-in-action.gif" alt="Code to console" width="90%" /&gt;
&lt;p class="caption"&gt;Code to console&lt;/p&gt;
&lt;/div&gt;

---

# Code organisation in scripts

We keep our code in scripts called `.R` files, simple text files ..

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/an-r-script.png" alt="An R script" width="100%" /&gt;
&lt;p class="caption"&gt;An R script&lt;/p&gt;
&lt;/div&gt;

---

# Code organisation in scripts - writing comments

We use `#` (hash) to create comments in our scripts, and they are not interpreted as code


```r
# Title: A script to do a particular task
# Date created: Today
# Details: These are the details of my work
# Last modified: Tomorrow

my_data &lt;- read.csv('a-data-file.csv')

# This is will be used in future calculations
days_in_6_months &lt;- 365 / 12 * 6 


# Can also be at the end of the line ..

days_in_6_months &lt;- 365 / 12 * 6  # This is will be used in future calculations
```

---

# RStudio projects

RStudio supports projects to allow all files associated with a project to be kept together.

 - An `.Rproj` file will open RStudio
 - The working directory will be the same folder

.pull-left[
&lt;img src="images/rstudio-project-file.png" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;img src="images/rstudio-project-screenshot.png" style="display: block; margin: auto;" /&gt;
]

---

class: center, inverse

# Let's get started with R and RStudio!

.section-subtitle[

Open the RStudio project file

.inverse[`student-material.Rproj`]

]


--


.section-subtitle[

and then within RStudio

.inverse[`M01-01-using-RStudio.R`]

and we will discuss each of the exercises together

]

---

class: center, middle

# First steps in R

---

# R is a calculator

We type expressions, R evaluates


```r
1 + 1
```

```
#&gt; [1] 2
```
&lt;/br&gt;

--


```r
4 * 2
```

```
#&gt; [1] 8
```
&lt;/br&gt;

--


```r
# Has math functions
sin(pi / 4)
```

```
#&gt; [1] 0.7071068
```
&lt;/br&gt;

---

# Storing values and results

We **assign** values into **variables** (or objects) using `&lt;-`&lt;sup&gt;1&lt;/sup&gt; or `=`


```r
result1 &lt;- 1 + 1       # recommended to use &lt;-
result2 = sin(pi / 4)
```
&lt;/br&gt;

.footnote[

[1] **Keyboard shortcut**: `Alt` + `-`
]

--

To access the value, we just type the variable name


```r
result1
```

```
#&gt; [1] 2
```

--


```r
result2 
```

```
#&gt; [1] 0.7071068
```



---

# Naming variables

Must be built from **letters**, **numbers** and **dots**, but **cannot start** with numbers.  


```r
x &lt;- 1
x_1 &lt;- 1  
x.1 &lt;- 1
1x  &lt;- 1  # error
```


```
#&gt; Error: unexpected symbol in '1x'
```
&lt;/br&gt;

--

Use **consistent, meaningful, descriptive** variable names


```r
# Storing the value of the number of days in 6 months
m6 &lt;- 365 / 12 * 6 
days_in_6_months &lt;- 365 / 12 * 6 
```

--

.footnote[
Do not be afraid of long names (RStudio has tab-completion)!
]

---

# Naming variables - case choice

 Use **consistent**, meaningful, descriptive variable names


```r
i_use_snake_case                     # snake_case
otherPeopleUseCamelCase              # camelCase
some.people.use.periods              # periods
And_aFew.People_RENOUNCEconvention   # ???
```

.footnote[
clean code is good code ...
]

---

# Variable names are case-sensitive


```r
days_in_6_months &lt;- 365 / 12 * 6 
```
&lt;br&gt;
--




```r
Days_in_6_months
```

```
#&gt; Error in eval(expr, envir, enclos): object 'Days_in_6_months' not found
```
&lt;/br&gt;

--


```r
days_in_6_months
```

```
#&gt; [1] 182.5
```

--

.footnote[
Again, using the `&lt;tab&gt;` key in RStudio helps you type (we will see in the exercises)
]

---

# Doing calculations on sets of numbers - vectors 

The function `c()` combines values in a vector


```r
weights_kg &lt;- c(61, 72, 52, 90, 93, 71)
weights_kg
```

```
#&gt; [1] 61 72 52 90 93 71
```
&lt;/br&gt;
--


after which we can use in calculations


```r
# convert values to grams
weights_kg * 1000
```

```
#&gt; [1] 61000 72000 52000 90000 93000 71000
```



---

# Functions help us do calculations

Many things in R are done using **functions** ... many statistical functions are included


```r
mean(weights_kg)
```

```
#&gt; [1] 73.16667
```

--


```r
sum(weights_kg) / length(weights_kg)
```

```
#&gt; [1] 73.16667
```

&lt;/br&gt;

--

How do they work? What is this doing?


```r
seq(0, 10, 2)
```

```
#&gt; [1]  0  2  4  6  8 10
```

---

# Functions have **arguments**, arguments have **values** 


```r
function_name(argument1 = value1, argument2 = value2, ...)
```
&lt;br&gt;

--

The `seq()` function

```
Generate regular sequences ...

  seq(from, to, by, length.out, along.with, ...)

```

&lt;/br&gt;

--

Generate a sequence **from** 0 **to** 10 **by** 2


```r
seq(0, 10, 2)
```

```
#&gt; [1]  0  2  4  6  8 10
```

---

# Using functions and arguments 

- Arguments can be named, and **this is a good practice** .. code is **readable**


```r
seq(from = 0, to = 10, by = 2)
```

```
#&gt; [1]  0  2  4  6  8 10
```
&lt;br&gt;
--

- Unnamed arguments need be in order ("positional") and **are often ambiguous** .. use named arguments!


```r
seq(0, 10, 2)
```

```
#&gt; [1]  0  2  4  6  8 10
```
&lt;br&gt;
--

- Named arguments can be in any order


```r
seq(by = 2, to = 10, from = 0)
```

```
#&gt; [1]  0  2  4  6  8 10
```

---

# Some functions have **default values** for arguments

Why does this work if we only use `to`?


```r
seq(to = 4)
```

```
#&gt; [1] 1 2 3 4
```
&lt;br&gt;
&lt;br&gt;

--

The help documentation reveals

```
seq(from = 1, to = 1, by = ((to - from)/(length.out - 1)),
    length.out = NULL, along.with = NULL, ...)
```
&lt;br&gt;
&lt;br&gt;

--

Thus the defaults are

 - `from = 1`
 - `to = 1`
 - `by = complicated` (in this case, `by = 1`)

---

# What arguments and information are available for a function?

Executing the function with `?` before it opens **help documentation**


```r
?seq
```

--

.pull-left[
&lt;img src="images/help-documentation.png" width="100%" style="display: block; margin: auto;" /&gt;
]

--

.pull-right[

- R help documentation is standardised

  - Title
  - Description
  - Usage
  - Arguments
  - Further details
  - Examples

]

---

# What arguments and information are available for a function?

Do not be afraid to ask Google!

&lt;img src="images/google-help.png" width="700px" style="display: block; margin: auto;" /&gt;

---

# Errors and warnings

When things do not work correct, you will receive a message in .red[red]. Be calm, and **read the message**

--

An **error** means something has failed, and **no** result produced

 - An error by the user e.g. **incorrect code**
 - An error from the computer e.g. **computer has used all memory**


```r
seq(from = NA, to = 5, by = 2)
```

```
#&gt; Error in seq.default(from = NA, to = 5, by = 2): 'from' must be a finite number
```

--

A **warning** means something is not correct, but a result **still produced**.

 - Sometimes this is just useful information 
 - Other times you will need to address the warning


```r
seq(from = 0, TO = 6, by = 2)
```

```
#&gt; Warning: In seq.default(from = 0, TO = 6, by = 2) :
#&gt;  extra argument 'TO' will be disregarded
```

```
#&gt; [1] 0
```

---

class: center, middle, inverse

# Let's do some exercises!

.section-subtitle[

Within RStudio, open the file

.inverse[`M01-02-coding-basics.R`]

and we will discuss each of the exercises together

]


---

class: center, middle

# Data types and structures

---

# Data types

R has: numbers, characters (text, strings), logical, and dates/times

.pull-left[

```r
5
```

```
#&gt; [1] 5
```
]

.pull-right[

```
#&gt; [1] "numeric" "double"  "integer"
```
]

--

.pull-left[

```r
"Tom"
```

```
#&gt; [1] "Tom"
```
]

.pull-right[

```
#&gt; [1] "character"
```
]

--

.pull-left[

```r
TRUE
```

```
#&gt; [1] TRUE
```
]

.pull-right[

```
#&gt; [1] "logical"
```
]

--

.pull-left[

```r
Sys.Date()
```

```
#&gt; [1] "2024-05-20"
```
]

.pull-right[

```
#&gt; [1] "Date"   "double"
```
]


---


# Data types - missing

R uses `NA` for a missing value ("Not Available) and `NaN` for "Not a Number"


```r
NA
```

```
#&gt; [1] NA
```

```r
NaN
```

```
#&gt; [1] NaN
```

&lt;br&gt;
--

These can have **special** treatment in functions ... we must be mindful of them always!


```r
mean(c(1,2,NA,3))
```

```
#&gt; [1] NA
```


---

# Data vectors

We store and work with data in **vectors** ... think columns of a spreadsheet&lt;sup&gt;1&lt;/sup&gt; 

.footnote[
[1] we will soon see them in columns of a **data.frame**
]


```r
c(5, 7, 2, 5, 6)
```

```
#&gt; [1] 5 7 2 5 6
```
&lt;br&gt;
--


```r
c("Tom", "Jerry", "Quacker")
```

```
#&gt; [1] "Tom"     "Jerry"   "Quacker"
```
&lt;br&gt;
--


```r
c(Sys.Date(), Sys.Date() - 1)
```

```
#&gt; [1] "2024-05-20" "2024-05-19"
```



---

# Only **one** type can live in a vector

R may automatically change types when different ones exist 

 - Important for when we import data later ...

.pull-left[

```r
# now all TEXT
c(1, 'Tom', TRUE) 
```

```
#&gt; [1] "1"    "Tom"  "TRUE"
```
]
--
.pull-right[

```r
# now all NUMBERS
c(1, 2, TRUE)
```

```
#&gt; [1] 1 2 1
```
]
--
.pull-left[

```r
# now all NUMBERS
c(1, Sys.Date())
```

```
#&gt; [1]     1 19863
```
]
--
.pull-right[


```r
# now all TEXT
c('Tom', Sys.Date())
```

```
#&gt; [1] "Tom"   "19863"
```
]
--
.pull-left[

```r
# NA is good, still NUMBERS
c(1, NA, 2, 3) 
```

```
#&gt; [1]  1 NA  2  3
```
]

---

# Elements in a vector can be named



```r
named_vector &lt;- c(Tom = 1, Jerry = 2, Quacker = 3)
named_vector
```

```
#&gt;     Tom   Jerry Quacker 
#&gt;       1       2       3
```


```r
names(named_vector)
```

```
#&gt; [1] "Tom"     "Jerry"   "Quacker"
```

.footnote[
We will come back to using names shortly
]

---

# Factor vectors

**Factors** are special vectors for categorisng data, and used extensively in statistical routines

 - Contain **levels** - information about what groups are present


```r
names_factor &lt;- factor(c("Tom", "Tom", "Jerry", "Quacker", "Jerry", "Quacker"))
levels(names_factor)
```

```
#&gt; [1] "Jerry"   "Quacker" "Tom"
```
&lt;br&gt;

--

**Numbers to factors**
 - The values now represent the groups "1" "3" and "5" and **not** the numbers ...


```r
numbers_factor &lt;- factor(c(1, 3, 5, 1, 5, 3))
levels(numbers_factor)
```

```
#&gt; [1] "1" "3" "5"
```

--

.footnote[
We will explore these later in the statistics module
]

---

# Matrix / Matricies

Vectors with **dimensions** e.g. vector of 12 values in 3 rows and 4 columns


```r
# Building a matrix manually - we create a vector and add dimensions
x &lt;- 1:12
dim(x) &lt;- c(3,4)
x
```

```
#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    4    7   10
#&gt; [2,]    2    5    8   11
#&gt; [3,]    3    6    9   12
```

--


```r
# Or use the matrix() function
matrix(1:12, nrow = 3)
```

```
#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    4    7   10
#&gt; [2,]    2    5    8   11
#&gt; [3,]    3    6    9   12
```

---

# Data frames

A rectangular collection of vectors of different types ... a "spreadsheet of data"

 - **columns** are vectors
 - **rows** are values across columns
 - the most important object in R for data analysis 


```r
# Building a data.frame manually
example_dataframe &lt;-
  data.frame(
    numbers = c(5, 7, 2),
    text = c("Tom", "Jerry", "Quacker"),
    logical = c(T, F, T),
    dates = as.Date(c("2024-01-01", "2024-01-02", "2024-01-03")),
    factors = factor(c("Tom", "Jerry", "Quacker"))
  )
```


```
#&gt;   numbers    text logical      dates factors
#&gt; 1       5     Tom    TRUE 2024-01-01     Tom
#&gt; 2       7   Jerry   FALSE 2024-01-02   Jerry
#&gt; 3       2 Quacker    TRUE 2024-01-03 Quacker
```

&lt;style type="text/css"&gt;
.dataframe-important {
  position: absolute;
  top: 2%;
  right: 2%;
  width: 300px;
}
&lt;/style&gt;

.dataframe-important[
![](images/important.jpg)&lt;!-- --&gt;
]

---

# Lists

Contain a collection of arbitrary objects ... statistical output is often contained in lists

.pull-left[

```r
example_list &lt;-
  list(
    group = 'person_list',
    n_persons = 3,
    age_range = list(min = 21, max = 29),
    persons = data.frame(
      names = c("Tom", "Jerry", "Quacker"),
      ages = c(21, 25, 29)
    )
  )
```
]

.pull-right[

```
#&gt; $group
#&gt; [1] "person_list"
#&gt; 
#&gt; $n_persons
#&gt; [1] 3
#&gt; 
#&gt; $age_range
#&gt; $age_range$min
#&gt; [1] 21
#&gt; 
#&gt; $age_range$max
#&gt; [1] 29
#&gt; 
#&gt; 
#&gt; $persons
#&gt;     names ages
#&gt; 1     Tom   21
#&gt; 2   Jerry   25
#&gt; 3 Quacker   29
```
]

---

class: middle, center
&lt;img src="images/r-data-structures.png" width="95%" /&gt;

---

class: center, middle

# Interacting with data structures

---

# **Indexing** - select elements by position

We use square brackets `[]` with position number


```r
a_vector &lt;- c(2,5,3,6,4,7,6)
```


```r
# The second element
a_vector[2]
```

```
#&gt; [1] 5
```

--


```r
# The fourth to sixth elements
a_vector[4:6]
```

```
#&gt; [1] 6 4 7
```

.footnote[
  We can use `:` for sequences, `4:6` = `c(4, 5, 6)`
]

---

# **Indexing** - remove elements by position

We can remove by using `-` before position numbers


```r
a_vector &lt;- c(2,5,3,6,4,7,6)
```


```r
# The second element
a_vector[-2]
```

```
#&gt; [1] 2 3 6 4 7 6
```

```r
# The fourth to sixth elements
a_vector[-(4:5)]
```

```
#&gt; [1] 2 5 3 7 6
```

.footnote[
  Be sure to use `()`, `-(4:5)`, otherwise `-4:5` = `-4, -3, -2, -1, 0, 1, 2, 3, 4, 5`
]

---

# Conditional selection with indexing

We use the **operators**: `&lt;`, `&gt;`, `==`, `!=` and combine with `&amp;` and `|`


```r
a_vector &lt;- c(2,5,3,6,4,7,6)
```

.pull-left[

```r
# greater than
a_vector[a_vector &gt; 5]                  
```

```
#&gt; [1] 6 7 6
```
]
--

.pull-right[

```r
 # equal to
a_vector[a_vector == 6]                
```

```
#&gt; [1] 6 6
```
]
--
.pull-left[

```r
# not equal to
a_vector[a_vector != 6]                 
```

```
#&gt; [1] 2 5 3 4 7
```
]
--
.pull-right[

```r
# greater than AND less than
a_vector[a_vector &gt; 5 &amp; a_vector &lt; 7]   
```

```
#&gt; [1] 6 6
```
]
--
.pull-left[

```r
# 1 or 7
a_vector[a_vector == 1 | a_vector == 7]                 
```

```
#&gt; [1] 7
```
]

---

# Conditional selection works by

creating a logical vector of `T` and `F`, **of the same length**.


```r
a_vector &lt;- c(2,5,3,6,4,7,6)
```


```r
a_vector &gt; 5
```

```
#&gt; [1] FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE
```
&lt;br&gt;
--


```r
a_vector[c(FALSE, FALSE, FALSE, TRUE, FALSE, TRUE, TRUE)]
```

```
#&gt; [1] 6 7 6
```
&lt;br&gt;
--


```r
a_vector[a_vector &gt; 5]
```

```
#&gt; [1] 6 7 6
```

---

# Conditional selection with `%in%`

For matching multiple values at once


```r
word_vector &lt;-  c("Tom", "Jerry", "Quacker","Jerry", "Tom", "Quacker")
```
&lt;br&gt;

```r
word_vector %in% c('Tom', 'Quacker')
```

```
#&gt; [1]  TRUE FALSE  TRUE FALSE  TRUE  TRUE
```
&lt;br&gt;
--


```r
word_vector[word_vector %in% c('Tom', 'Quacker')]
```

```
#&gt; [1] "Tom"     "Quacker" "Tom"     "Quacker"
```

---

# Selection with named vectors


Values can be referenced **by name** using `[]`

```r
named_vector &lt;- c(Tom = 1, Jerry = 2, Quacker = 3)
named_vector
```

```
#&gt;     Tom   Jerry Quacker 
#&gt;       1       2       3
```
&lt;br&gt;
--


```r
named_vector['Tom']
```

```
#&gt; Tom 
#&gt;   1
```
&lt;br&gt;
--


```r
named_vector[c('Tom', 'Quacker')]
```

```
#&gt;     Tom Quacker 
#&gt;       1       3
```

---

# Matricies

We extend the use of `[]` with `[rows, columns]`



```
#&gt; example_matrix
```

```
#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    4    7   10
#&gt; [2,]    2    5    8   11
#&gt; [3,]    3    6    9   12
```

--

.pull-left[
Column selection
 

```r
example_matrix[,1] # ! returns a vector
```

```
#&gt; [1] 1 2 3
```

```r
example_matrix[,1:2] # returns a matrix
```

```
#&gt;      [,1] [,2]
#&gt; [1,]    1    4
#&gt; [2,]    2    5
#&gt; [3,]    3    6
```
]

--

.pull-right[
Row selection


```r
example_matrix[1,] # ! returns a vector
```

```
#&gt; [1]  1  4  7 10
```

```r
example_matrix[1:2,] # returns a matrix
```

```
#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    4    7   10
#&gt; [2,]    2    5    8   11
```
]

---

# Matricies

Can use columns names if they are present


```
#&gt; example_matrix
```

```
#&gt;      wk1 wk2 wk3 wk4
#&gt; [1,]   1   4   7  10
#&gt; [2,]   2   5   8  11
#&gt; [3,]   3   6   9  12
```

--


```r
colnames(example_matrix)
```

```
#&gt; [1] "wk1" "wk2" "wk3" "wk4"
```

--
 

```r
example_matrix[, c('wk1', 'wk2')]
```

```
#&gt;      wk1 wk2
#&gt; [1,]   1   4
#&gt; [2,]   2   5
#&gt; [3,]   3   6
```

---

# Data frames
  
Accessing columns using `$` (the dollar sign) and `[[]]` (double square brackets)


```r
example_dataframe
```

```
#&gt;   numbers    text logical      dates factors
#&gt; 1       5     Tom    TRUE 2024-01-01     Tom
#&gt; 2       7   Jerry   FALSE 2024-01-02   Jerry
#&gt; 3       2 Quacker    TRUE 2024-01-03 Quacker
```
&lt;br&gt;
--


```r
example_dataframe$text
```

```
#&gt; [1] "Tom"     "Jerry"   "Quacker"
```
&lt;br&gt;
--


```r
example_dataframe[['text']]
```

```
#&gt; [1] "Tom"     "Jerry"   "Quacker"
```

---

# Data frames
  
As with matricies `[rows, columns]`


```r
# First 2 columns
example_dataframe[, 1:2]
```

```
#&gt;   numbers    text
#&gt; 1       5     Tom
#&gt; 2       7   Jerry
#&gt; 3       2 Quacker
```

--


```r
# Columns by name
example_dataframe[, c('text', 'dates')]
```

```
#&gt;      text      dates
#&gt; 1     Tom 2024-01-01
#&gt; 2   Jerry 2024-01-02
#&gt; 3 Quacker 2024-01-03
```

--

.footnote[
**Important**: this is a "traditional" way of row and column selection. We will use tidyverse methods in future.
]

---

# Lists
  
Use `$` and `[[]]` ... sometimes multiple times&lt;sup&gt;1&lt;/sup&gt;

.pull-left[

```
#&gt; $group
#&gt; [1] "person_list"
#&gt; 
#&gt; $n_persons
#&gt; [1] 3
#&gt; 
#&gt; $age_range
#&gt; $age_range$min
#&gt; [1] 21
#&gt; 
#&gt; $age_range$max
#&gt; [1] 29
#&gt; 
#&gt; 
#&gt; $persons
#&gt;     names ages
#&gt; 1     Tom   21
#&gt; 2   Jerry   25
#&gt; 3 Quacker   29
```
]

.pull-right[


```r
example_list$persons
```

```
#&gt;     names ages
#&gt; 1     Tom   21
#&gt; 2   Jerry   25
#&gt; 3 Quacker   29
```

```r
example_list$age_range$min # [1]
```

```
#&gt; [1] 21
```




```r
example_list[["persons"]]
```

```
#&gt;     names ages
#&gt; 1     Tom   21
#&gt; 2   Jerry   25
#&gt; 3 Quacker   29
```

]

---

# Selection of data in action

&lt;style type="text/css"&gt;
.pull-left-33  { width: 33%; float: left; }
.pull-right-66 { width: 66%; float: right; }
&lt;/style&gt;

.pull-left-33[



```r
my_data
```

```
#&gt;    time value group
#&gt; 1     1     8   sin
#&gt; 2     2     9   sin
#&gt; 3     3     1   sin
#&gt; 4     4    -8   sin
#&gt; 5     5   -10   sin
#&gt; 6     6    -3   sin
#&gt; 7     7     7   sin
#&gt; 8     8    10   sin
#&gt; 9     9     4   sin
#&gt; 10   10    -5   sin
#&gt; 11    1     5   cos
#&gt; 12    2    -5   cos
#&gt; 13    3   -10   cos
#&gt; 14    4    -7   cos
#&gt; 15    5     2   cos
#&gt; 16    6     9   cos
#&gt; 17    7     7   cos
#&gt; 18    8    -2   cos
#&gt; 19    9   -10   cos
#&gt; 20   10    -9   cos
```
]

--

.pull-right-66[



```r
plot(x = my_data$time, y = my_data$value)
```

![](01-Module-1_files/figure-html/unnamed-chunk-115-1.png)&lt;!-- --&gt;
]

---

# Selection of data in action

.pull-left-33[


```r
my_data
```

```
#&gt;    time value group
#&gt; 1     1     8   sin
#&gt; 2     2     9   sin
#&gt; 3     3     1   sin
#&gt; 4     4    -8   sin
#&gt; 5     5   -10   sin
#&gt; 6     6    -3   sin
#&gt; 7     7     7   sin
#&gt; 8     8    10   sin
#&gt; 9     9     4   sin
#&gt; 10   10    -5   sin
#&gt; 11    1     5   cos
#&gt; 12    2    -5   cos
#&gt; 13    3   -10   cos
#&gt; 14    4    -7   cos
#&gt; 15    5     2   cos
#&gt; 16    6     9   cos
#&gt; 17    7     7   cos
#&gt; 18    8    -2   cos
#&gt; 19    9   -10   cos
#&gt; 20   10    -9   cos
```
]


.pull-right-66[



```r
plot(x = my_data$time, y = my_data$value)
lines(
  x = my_data[ my_data$group == 'sin', c('time', 'value') ]
)
```

![](01-Module-1_files/figure-html/unnamed-chunk-117-1.png)&lt;!-- --&gt;
]

---

# Selection of data in action

.pull-left-33[


```r
my_data
```

```
#&gt;    time value group
#&gt; 1     1     8   sin
#&gt; 2     2     9   sin
#&gt; 3     3     1   sin
#&gt; 4     4    -8   sin
#&gt; 5     5   -10   sin
#&gt; 6     6    -3   sin
#&gt; 7     7     7   sin
#&gt; 8     8    10   sin
#&gt; 9     9     4   sin
#&gt; 10   10    -5   sin
#&gt; 11    1     5   cos
#&gt; 12    2    -5   cos
#&gt; 13    3   -10   cos
#&gt; 14    4    -7   cos
#&gt; 15    5     2   cos
#&gt; 16    6     9   cos
#&gt; 17    7     7   cos
#&gt; 18    8    -2   cos
#&gt; 19    9   -10   cos
#&gt; 20   10    -9   cos
```
]

.pull-right-66[



```r
plot(x = my_data$time, y = my_data$value)
lines(
  x = my_data[ my_data$group == 'sin', c('time', 'value') ]
)
lines(
  x = my_data[ my_data$group == 'cos', c('time', 'value') ],
  col = 'red'
)
```

![](01-Module-1_files/figure-html/unnamed-chunk-119-1.png)&lt;!-- --&gt;
]

---

class: center, middle, inverse

# Exercise time!

.section-subtitle[

Open the file

.inverse[`M01-03-exploring-data-structures.R`]

and we will discuss each of the exercises together

]

---

class: center, middle

# Extending R with new R packages

---

# Installing new R packages

R packages live online in curated **repositories** or in the wild on GitHub and other software repository websites.

### CRAN

- **CRAN (Comprehensive R Archive Network)**: This is the primary and **default** repository for 
R packages. [See the list online.](https://cran.r-project.org/web/packages/available_packages_by_name.html)

--

### Others

- **Bioconductor**:  Specialized in bioinformatics packages. 
[See the list online.](https://www.bioconductor.org/packages/release/BiocViews.html#___Software)

- **GitHub and other sources**&lt;sup&gt;1&lt;/sup&gt;: Contain source code for packages, from which installation is possible. 

.footnote[

[1] Source code for many of the CRAN and Bioconductor packages live here, but many others that **have not been through quality checking** of CRAN and Bioconductor.
]

---

# R packages - CRAN


We **install** a package onto the computer using:


```r
install.packages('tidyverse')
```

--

And **load** them into our **current R session** using


```r
library(tidyverse)
# Now can use tidyverse functions
```


.footnote[

**You should have installed `tidyverse` prior to the course!**

]

---

# Installing verus loading a package

**Installing** a package with `install.package()` downloads the package&lt;sup&gt;1&lt;/sup&gt; to your computer
 
   - You do this once, or when you want to **update** a package
   
&lt;img src="images/internet-to-computer.png" width="300px" style="display: block; margin: auto;" /&gt;
&lt;br&gt;
&lt;br&gt;

.footnote[
[1] It may actually download **multiple packages** (including those itself uses)
]

--

 **Loading** a package using `library()` makes the package available to your current R session
 
   - You need to load packages very time you start R/RStudio
   - At the beginning of your R scripts you should load the packages required
   
&lt;img src="images/computer-to-R.png" width="300px" style="display: block; margin: auto;" /&gt;

---

# What R packages do you have?

The RStudio 'Packages' tab details this

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/rstudio-screenshot-packages.png" alt="RStudio packages" width="650px" /&gt;
&lt;p class="caption"&gt;RStudio packages&lt;/p&gt;
&lt;/div&gt;

---

# Do I have this R package?


```r
library(dundermifflin)
```


```
#&gt; Error in library(dundermifflin): there is no package called 'dundermifflin'
```





&lt;/br&gt;
--

**Therefore** 


```r
install.packages('dundermifflin')
```


```
#&gt; Installing package into ...
#&gt; ...
#&gt; package ‘dundermifflin’ successfully unpacked and MD5 sums checked
```

--


```r
library(dundermifflin)
get_quote()
```


```
#&gt; Is this the same grill you grilled your foot on?
#&gt; ~ Ryan
#&gt; Season 3, Episode 14 - Ben Franklin
```

---

# Exploring the documentation of a package in RStudio

.pull-left[

![](images/packages-tab.png)&lt;!-- --&gt;

]

--

.pull-right[

![](images/package-documentation.png)&lt;!-- --&gt;

]

---

# Namespacing

**Namespacing** allows us to use a package function without loading it

 - `package_name::function_name` (use the double colon)
 
--
 
E.g. `select()` is a function of the **`dplyr`** package 


```r
# From the iris data.frame select the columns `Petal.Width`, `species`
select(iris, Petal.Width, species)
```


```
#&gt; Error in select(iris, Petal.Width, species) : 
#&gt;   could not find function "select"
```
 
--


```r
dplyr::select(iris, Petal.Width, Species)
```


```
#&gt;   Petal.Width Species
#&gt; 1         0.2  setosa
#&gt; 2         0.2  setosa
#&gt; 3         0.2  setosa
#&gt; 4         0.2  setosa
#&gt; 5         0.2  setosa
```

--

.footnote[

Using RStudio tab completion with `package_name::` lists all of it's functions!

]

---

# Namespacing

Is also important when the **same function name** exists in different packages

- It ensures we explicitly use the function we want

--

E.g. `filter()` is found in **`stats`** and **`dplyr`**


.pull-left[


```r
stats::filter()
```

```
function (x, filter, 
    method = c("convolution", "recursive"), 
    sides = 2L, circular = FALSE, init = NULL)
```
]

.pull-right[

```r
dplyr::filter()
```

```
function (.data, ..., .by = NULL, 
    .preserve = FALSE)
```

]

&lt;br&gt;
&lt;br&gt;

--

Which package is `filter()` being used from?


```r
filter(my_data)
```


---

# The tidyverse set of packages

&lt;img src="images/tidyverse.png" width="83%" style="display: block; margin: auto;" /&gt;

.footnote[

 [https://www.tidyverse.org/](https://www.tidyverse.org/)

]

---

class: center, middle, inverse

# Let's get examine and use some R packages!

.section-subtitle[

Open the file

.inverse[`M01-04-R-packages.R`]

and we will discuss each of the exercises together

]

---

class: center, middle

# R in action - making a visualisation with ggplot2

---

# We will build this visualisation



.pull-left[
![](01-Module-1_files/figure-html/unnamed-chunk-144-1.png)&lt;!-- --&gt;
]

--

.pull-right[

And gain experience in

  - Importing data
  
  
  - Using functions and arguments
  
  - Using data.frame columns
  
  - Chaining functions together
  
  - Exporting to a file

]


---

# The task

Import and examine the data


```r
penguins &lt;- read.csv('student-material/data/penguins.csv')
```

--

Build a visualisation using **`ggplot2`**


```r
ggplot(
  data = penguins,
  mapping = aes(x = flipper_length_mm, y = body_mass_g, color = species)
  ) +
  geom_point() +
  geom_smooth(method = 'lm', se = FALSE) +
  labs(title="Body mass and flipper length", x="Flipper length (mm)", y ="Body mass (g)")
```

--

Export the visualisation to a file


```r
ggsave(filename = 'my-first-plot.png', plot = last_plot(),
       width = 18, height = 15, units = 'cm')
```

---

# Importing a dataset

- The provided file `data/penguins.csv` is a dataset on pengiuns from the **`palmerpenguins `** package&lt;sup&gt;1&lt;/sup&gt;

- We use the function `read.csv()` to import the file into a data.frame called `penguins`


```r
penguins &lt;- read.csv('data/penguins.csv')
```

.footnote[
[1] We are using an exported file for sake of example.
]

--


```r
str(penguins)
```

```
#&gt; 'data.frame':	344 obs. of  8 variables:
#&gt;  $ species          : chr  "Adelie" "Adelie" "Adelie" "Adelie" ...
#&gt;  $ island           : chr  "Torgersen" "Torgersen" "Torgersen" "Torgersen" ...
#&gt;  $ bill_length_mm   : num  39.1 39.5 40.3 NA 36.7 39.3 38.9 39.2 34.1 42 ...
#&gt;  $ bill_depth_mm    : num  18.7 17.4 18 NA 19.3 20.6 17.8 19.6 18.1 20.2 ...
#&gt;  $ flipper_length_mm: int  181 186 195 NA 193 190 181 195 193 190 ...
#&gt;  $ body_mass_g      : int  3750 3800 3250 NA 3450 3650 3625 4675 3475 4250 ...
#&gt;  $ sex              : chr  "male" "female" "female" NA ...
#&gt;  $ year             : int  2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 ...
```



---

# What will we visualise?

Display the relationship between **flipper lengths** and **body masses**, taking into consideration the **species** of penguin.


```r
head(penguins)
```

```
#&gt;   species    island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g    sex year
#&gt; 1  Adelie Torgersen           39.1          18.7               181        3750   male 2007
#&gt; 2  Adelie Torgersen           39.5          17.4               186        3800 female 2007
#&gt; 3  Adelie Torgersen           40.3          18.0               195        3250 female 2007
#&gt; 4  Adelie Torgersen             NA            NA                NA          NA   &lt;NA&gt; 2007
#&gt; 5  Adelie Torgersen           36.7          19.3               193        3450 female 2007
#&gt; 6  Adelie Torgersen           39.3          20.6               190        3650   male 2007
```

---

# How ggplot2 works - build by layers

Start with `ggplot()` ... add **data**, map **aesthetics** ... add **layers** using `+` (plus symbol)&lt;sup&gt;1&lt;/sup&gt;

- **Aesthetics**: What variables of the data to use map to visual properties
- **Geom**: What geometrical object represents the data 
- **Annotations**: Text annotations such as titles


```r
ggplot(
  # data, aesthetics
  data = penguins,
  mapping = aes(x = flipper_length_mm, y = body_mass_g, color = species)
  ) +
  # geom layers
  geom_point() +
  geom_smooth(method = 'lm', se = FALSE) +
  # annotations
  labs(title="Body mass and flipper length", x="Flipper length (mm)", y ="Body mass (g)")
```

.footnote[
[1] We are **chaining** together functions to add layers
]

---

# ggplot() with the data layer

.pull-left[

```r
gglot(penguins)
```
]

.pull-right[
&lt;img src="01-Module-1_files/figure-html/unnamed-chunk-153-1.png" style="display: block; margin: auto;" /&gt;
]

---

# Axes asthetics

.pull-left[

```r
ggplot(
  data = penguins,
* mapping = aes(x = flipper_length_mm,
*               y = body_mass_g)
  ) 
```
]

.pull-right[
&lt;img src="01-Module-1_files/figure-html/unnamed-chunk-155-1.png" style="display: block; margin: auto;" /&gt;
]

---

# Adding a point geom

.pull-left[

```r
ggplot(
  data = penguins,
  mapping = aes(x = flipper_length_mm, 
                y = body_mass_g)) +
* geom_point()
```
]

.pull-right[
&lt;img src="01-Module-1_files/figure-html/unnamed-chunk-157-1.png" style="display: block; margin: auto;" /&gt;
]

---

# Color points by species using asthetics

.pull-left[

```r
ggplot(
  data = penguins,
  mapping = aes(x = flipper_length_mm, 
                y = body_mass_g,
*               color = species)) +
  geom_point()
```
]

.pull-right[
&lt;img src="01-Module-1_files/figure-html/unnamed-chunk-159-1.png" style="display: block; margin: auto;" /&gt;
]

---

# Add linear regression lines geom

.pull-left[

```r
ggplot(
  data = penguins,
  mapping = aes(x = flipper_length_mm, 
                y = body_mass_g,
                color = species)) +
  geom_point() +
* geom_smooth(method = 'lm', se = FALSE)
```
]

.pull-right[
&lt;img src="01-Module-1_files/figure-html/unnamed-chunk-161-1.png" style="display: block; margin: auto;" /&gt;
]

---

# Titles and labels

.pull-left[

```r
ggplot(
  data = penguins,
  mapping = aes(x = flipper_length_mm, 
                y = body_mass_g,
                color = species)) +
  geom_point() +
  geom_smooth(method = 'lm', se = FALSE) +
* labs(
*   title = "Body mass and flipper length",
*   subtitle = "Dimensions for Adeli ...",
*   x = "Flipper length (mm)",
*   y = "Body mass (g)",
*   color = "Species",
*   shape = "Species"
* )
```
]

.pull-right[
&lt;img src="01-Module-1_files/figure-html/unnamed-chunk-163-1.png" style="display: block; margin: auto;" /&gt;
]

---

# Exporting the plot

With the final plot in the Plot viewer of RStudio, we use


```r
ggsave(filename = 'my-first-plot.png',
       plot = last_plot(),
       width = 18, 
       height = 15, 
       units = 'cm')
```

&lt;/br&gt;

The file type `.png` is termed the **device**, and can be many e.g. `.pdf`, `.tiff`
`.bmp`, etc.

---


class: center, middle, inverse

# Let's build a visualisation!

.section-subtitle[

Open the file

.inverse[`M01-04-ggplot2-visualisation.R`]

and we will discuss each of the exercises together

]

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
